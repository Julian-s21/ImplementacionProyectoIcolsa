@model icolsaProyecto.Models.Usuario

@{
    ViewData["Title"] = "Recuperar Contraseña";
    ViewData["HideSidebar"] = true;
}

<div class="min-vh-100 d-flex align-items-center justify-content-center"
     style="background: linear-gradient(135deg, #8e2de2, #4a00e0);">

    <div class="card border-0 shadow-2xl rounded-5 overflow-hidden"
         style="max-width: 900px; width: 100%; backdrop-filter: blur(12px); background: rgba(255, 255, 255, 0.15); border: 1px solid rgba(255, 255, 255, 0.25);">

        <div class="row g-0">

            <!-- Columna izquierda -->
            <div class="col-md-6 text-white d-flex flex-column justify-content-center align-items-center p-5"
                 style="background: linear-gradient(135deg, #6f42c1, #b968e2);">

                <h2 class="fw-bold mb-2 text-center">¿Olvidaste tu Contraseña?</h2>
                <p class="text-center text-light opacity-75 mb-0">
                    No te preocupes. Te enviaremos un correo para que puedas recuperarla.
                </p>
            </div>

            <!-- Columna derecha -->
            <div class="col-md-6 bg-white p-5">

                <div class="text-center mb-4">
                    <i class="bi bi-envelope-open-fill" style="font-size: 2.5rem; color: #6f42c1;"></i>
                    <h3 class="mt-3 fw-bold" style="color:#4a00e0;">Recuperar Contraseña</h3>
                </div>

                <form asp-action="ForgotPassword" asp-controller="Usuario" method="post">
    @Html.AntiForgeryToken()

    <!-- Correo -->
    <div class="mb-3">
        <label class="form-label">Correo</label>
        <input name="correo" class="form-control" placeholder="ejemplo@correo.com" required />
    </div>

    <!-- Nueva contraseña -->
    <div class="mb-3">
        <label class="form-label">Nueva contraseña</label>
        <input type="password" name="nueva" class="form-control" required />
    </div>

    <!-- Confirmar contraseña -->
    <div class="mb-3">
        <label class="form-label">Confirmar contraseña</label>
        <input type="password" name="confirmar" class="form-control" required />
    </div>

    <button type="submit" class="btn btn-primary w-100">Restablecer contraseña</button>

    @if (ViewBag.Error != null)
    {
        <div class="alert alert-danger mt-3 text-center">@ViewBag.Error</div>
    }

    @if (ViewBag.Success != null)
    {
        <div class="alert alert-success mt-3 text-center">@ViewBag.Success</div>
    }
</form>
<div class="text-center mt-4">
                        <small>¿Ya te has acordado de tu contraseña?
                            <a asp-controller="Usuario" asp-action="Login" class="text-primary fw-semibold text-decoration-none">Inicia sesión</a>
                        </small>
                    </div>


            </div>
        </div>
    </div>
</div>


<!-- ============================= -->
<!-- ESTILOS PERSONALIZADOS -->
<!-- ============================= -->
<style>
    body {
        background: linear-gradient(135deg, #8e2de2, #4a00e0);
    }

    .card {
        animation: fadeIn 0.6s ease-in-out;
    }

    .btn:hover {
        transform: scale(1.03);
    }

    .input-group-text {
        border: none;
        border-right: 1px solid #e0e0e0;
    }

    .form-control:focus {
        box-shadow: 0 0 0 0.25rem rgba(111, 66, 193, 0.25);
    }
</style>


<!-- ============================= -->
<!-- SCRIPTS -->
<!-- ============================= -->
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        // Opcional: Mostrar mensaje al enviar
        const form = document.getElementById("forgotForm");

        form.addEventListener("submit", function () {
            Swal.fire({
                title: 'Procesando...',
                text: 'Estamos verificando tu correo',
                icon: 'info',
                showConfirmButton: false,
                timer: 1800
            });
        });
    </script>
}
